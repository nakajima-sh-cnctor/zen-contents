---
title: "èªè¨¼ãƒ•ãƒ­ãƒ¼ã‚’æ§‹ç¯‰ã—é–²è¦§åˆ¶é™ã‚’è¨­ã‘ã¾ã—ãŸ"
emoji: "ğŸ“˜"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["Vue","javascript","firebase"]
published: false
---

## é–¢é€£è¨˜äº‹
https://zenn.dev/shunsuke_stack/articles/3b7759f0053ca6

https://zenn.dev/shunsuke_stack/articles/bdf5b784bd6f8b

https://zenn.dev/shunsuke_stack/articles/88dedd7c5a2341

## èªè¨¼ãƒ•ãƒ­ãƒ¼
```mermaid
flowchart TD
    A[ã‚¢ãƒ—ãƒªèµ·å‹•] --> B{èªè¨¼æƒ…å ±ã‚ã‚Š?}
    B -->|No| C[ã‚µã‚¤ãƒ³ã‚¢ãƒƒãƒ—ç”»é¢]
    B -->|Yes| D[ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢]
    
    C --> E[èªè¨¼æƒ…å ±ç™»éŒ²]
    E --> F[ç™»éŒ²å®Œäº†]
    F --> D
    
    D --> H[ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹/ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å…¥åŠ›]
    H --> I{èªè¨¼æˆåŠŸ?}
    I -->|No| D
    I -->|Yes| G
    
    J[HOMEç”»é¢ã¸ã®ç›´æ¥ã‚¢ã‚¯ã‚»ã‚¹] --> K{èªè¨¼æ¸ˆã¿?}
    K -->|No| D
    K -->|Yes| G
    
    G --> L[ã‚¢ãƒ—ãƒªåˆ©ç”¨]
```

## HOMEç”»é¢ã®é–²è¦§åˆ¶é™ã‚’å®Ÿè£…
èªè¨¼æƒ…å ±ãŒãªã„ã¨HOMEç”»é¢(index.vue)ã‚’é–‹ã‘ãªã„ã‚ˆã†ã«åˆ¶é™ã‚’è¨­ã‘ã¾ã™ã€‚

### middlewareã§ã¯å®Ÿè£…ã—ãªã„
ä¸€èˆ¬çš„ãªæ–¹æ³•ã¨ã—ã¦ã¯ middlewareã§å®Ÿè£…ã™ã‚‹æ‰‹ãŒã‚ã‚Šã¾ã™ãŒã€ä»Šå›ã®å®Ÿè£…ã§ã¯app/composables/useAuth.tsã§èªè¨¼çŠ¶æ…‹ã®ç›£è¦–ã‚’è¡Œã£ã¦ã„ã‚‹ã®ã§ã‚ã–ã‚ã–çµŒç”±ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã›ã‚“

###ã€€firebase/auth onAuthStateChangedã®ä»•æ§˜

`firebase/auth` ã® `onAuthStateChanged` ã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ­ã‚°ã‚¤ãƒ³çŠ¶æ…‹ï¼ˆã‚µã‚¤ãƒ³ã‚¤ãƒ³ã€ã‚µã‚¤ãƒ³ã‚¢ã‚¦ãƒˆã€ã¾ãŸã¯ãƒˆãƒ¼ã‚¯ãƒ³ã®æœ‰åŠ¹æœŸé™åˆ‡ã‚Œãªã©ï¼‰ã®å¤‰åŒ–ã‚’ç›£è¦–ã™ã‚‹ãŸã‚ã®éå¸¸ã«é‡è¦ãªæ©Ÿèƒ½ã§ã™ã€‚ã“ã‚Œã¯ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®è¡¨ç¤ºã‚’ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®èªè¨¼çŠ¶æ…‹ã«å¿œã˜ã¦å‹•çš„ã«å¤‰æ›´ã—ãŸã„å ´åˆã«ä¸­å¿ƒçš„ãªå½¹å‰²ã‚’æœãŸã—ã¾ã™ã€‚

-----

## `onAuthStateChanged` ã®åŸºæœ¬çš„ãªä»•çµ„ã¿

`onAuthStateChanged` ã¯ã€Firebase Authenticationã®çŠ¶æ…‹ã«å¤‰åŒ–ãŒã‚ã£ãŸã¨ãã«å¸¸ã«å‘¼ã³å‡ºã•ã‚Œã‚‹ã€Œã‚ªãƒ–ã‚¶ãƒ¼ãƒãƒ¼ï¼ˆç›£è¦–è€…ï¼‰ã€ã‚’è¨­å®šã™ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰ã§ã™ã€‚ãƒšãƒ¼ã‚¸ãŒèª­ã¿è¾¼ã¾ã‚ŒãŸã¨ãã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒãƒ­ã‚°ã‚¤ãƒ³ã—ãŸã¨ãã€ã¾ãŸã¯ãƒ­ã‚°ã‚¢ã‚¦ãƒˆã—ãŸã¨ãã«ãƒˆãƒªã‚¬ãƒ¼ã•ã‚Œã¾ã™ã€‚

ã“ã®ãƒ¡ã‚½ãƒƒãƒ‰ã¯ã€å¼•æ•°ã¨ã—ã¦ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯é–¢æ•°ã‚’å—ã‘å–ã‚Šã¾ã™ã€‚ãã®ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯é–¢æ•°ã«ã¯ã€ç¾åœ¨ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ãŒå«ã¾ã‚Œã‚‹ `user` ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒæ¸¡ã•ã‚Œã¾ã™ã€‚

  * **ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã‚µã‚¤ãƒ³ã‚¤ãƒ³ã—ã¦ã„ã‚‹å ´åˆ**: `user` ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«ã¯ã€`uid`, `displayName`, `email` ãªã©ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ãŒå«ã¾ã‚Œã¾ã™ã€‚
  * **ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã‚µã‚¤ãƒ³ã‚¢ã‚¦ãƒˆã—ã¦ã„ã‚‹å ´åˆ**: `user` ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¯ `null` ã«ãªã‚Šã¾ã™ã€‚

### ä¸»ãªç‰¹å¾´

  * **æŒç¶šçš„ãªçŠ¶æ…‹ç®¡ç†**: Firebase SDKã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®èªè¨¼çŠ¶æ…‹ã‚’è‡ªå‹•çš„ã«æ°¸ç¶šåŒ–ã—ã¾ã™ï¼ˆé€šå¸¸ã¯IndexedDBã«ä¿å­˜ï¼‰ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒãƒ–ãƒ©ã‚¦ã‚¶ã‚’é–‰ã˜ãŸã‚Šã€ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿ã—ãŸã‚Šã—ã¦ã‚‚ã€ãƒ­ã‚°ã‚¤ãƒ³çŠ¶æ…‹ãŒç¶­æŒã•ã‚Œã¾ã™ã€‚`onAuthStateChanged` ã¯ã€ã“ã®æ°¸ç¶šåŒ–ã•ã‚ŒãŸçŠ¶æ…‹ã‚’èª­ã¿è¾¼ã‚“ã§é€šçŸ¥ã—ã¦ãã‚Œã¾ã™ã€‚
  * **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãªç›£è¦–**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ­ã‚°ã‚¤ãƒ³/ãƒ­ã‚°ã‚¢ã‚¦ãƒˆæ“ä½œã‚’å³åº§ã«æ¤œçŸ¥ã—ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®UIã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§æ›´æ–°ã§ãã¾ã™ã€‚
  * **åˆæœŸåŒ–æ™‚ã®å‘¼ã³å‡ºã—**: ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®èª­ã¿è¾¼ã¿æ™‚ã«ä¸€åº¦å¿…ãšå‘¼ã³å‡ºã•ã‚Œã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæ—¢ã«ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ã„ã‚‹ã‹ã©ã†ã‹ã‚’ç¢ºèªã—ã€é©åˆ‡ãªç”»é¢ï¼ˆä¾‹ï¼šãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸ã¾ãŸã¯ãƒ­ã‚°ã‚¤ãƒ³ãƒšãƒ¼ã‚¸ï¼‰ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã§ãã¾ã™ã€‚

-----

## å®Ÿè£…æ–¹æ³•

`onAuthStateChanged` ã‚’ä½¿ç”¨ã™ã‚‹ã«ã¯ã€ã¾ãšFirebase Authã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’å–å¾—ã—ã€ãã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã«å¯¾ã—ã¦ãƒªã‚¹ãƒŠãƒ¼ã‚’ç™»éŒ²ã—ã¾ã™ã€‚

### åŸºæœ¬çš„ãªã‚³ãƒ¼ãƒ‰ä¾‹ (JavaScript)

```javascript
import { getAuth, onAuthStateChanged } from "firebase/auth";

// Firebase Authã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’å–å¾—
const auth = getAuth();

// èªè¨¼çŠ¶æ…‹ã®å¤‰åŒ–ã‚’ç›£è¦–ã™ã‚‹ãƒªã‚¹ãƒŠãƒ¼ã‚’ç™»éŒ²
const unsubscribe = onAuthStateChanged(auth, (user) => {
  if (user) {
    // ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ã„ã‚‹å ´åˆã®å‡¦ç†
    console.log("ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ã„ã¾ã™:", user);
    const uid = user.uid;
    // ä¾‹: ãƒ¦ãƒ¼ã‚¶ãƒ¼å°‚ç”¨ãƒšãƒ¼ã‚¸ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã™ã‚‹
    // window.location.href = '/dashboard';
  } else {
    // ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒãƒ­ã‚°ã‚¢ã‚¦ãƒˆã—ã¦ã„ã‚‹å ´åˆã®å‡¦ç†
    console.log("ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ãƒ­ã‚°ã‚¢ã‚¦ãƒˆã—ã¦ã„ã¾ã™ã€‚");
    // ä¾‹: ãƒ­ã‚°ã‚¤ãƒ³ãƒšãƒ¼ã‚¸ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã™ã‚‹
    // window.location.href = '/login';
  }
});

// å¿…è¦ã«å¿œã˜ã¦ãƒªã‚¹ãƒŠãƒ¼ã‚’è§£é™¤ã™ã‚‹
// unsubscribe();
```

### ãƒã‚¤ãƒ³ãƒˆ

1.  **`getAuth()`**: Firebaseã‚¢ãƒ—ãƒªã®Authã‚µãƒ¼ãƒ“ã‚¹ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’å–å¾—ã—ã¾ã™ã€‚
2.  **`onAuthStateChanged(auth, callback)`**: ç¬¬ä¸€å¼•æ•°ã«`auth`ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã€ç¬¬äºŒå¼•æ•°ã«çŠ¶æ…‹å¤‰åŒ–æ™‚ã«å®Ÿè¡Œã—ãŸã„ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯é–¢æ•°ã‚’æ¸¡ã—ã¾ã™ã€‚
3.  **`user` ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ**: ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯é–¢æ•°ã«æ¸¡ã•ã‚Œã‚‹ã“ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ã€ãƒ­ã‚°ã‚¤ãƒ³çŠ¶æ…‹ã‚’åˆ¤å®šã—ã¾ã™ã€‚
4.  **`unsubscribe`**: `onAuthStateChanged` ã¯ã€ç›£è¦–ã‚’åœæ­¢ã™ã‚‹ãŸã‚ã®é–¢æ•°ï¼ˆã“ã®ä¾‹ã§ã¯ `unsubscribe`ï¼‰ã‚’è¿”ã—ã¾ã™ã€‚ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒã‚¢ãƒ³ãƒã‚¦ãƒ³ãƒˆã•ã‚Œã‚‹éš›ãªã©ã€ç›£è¦–ãŒä¸è¦ã«ãªã£ãŸå ´åˆã¯ã€ã“ã®é–¢æ•°ã‚’å‘¼ã³å‡ºã—ã¦ãƒ¡ãƒ¢ãƒªãƒªãƒ¼ã‚¯ã‚’é˜²ãã“ã¨ãŒæ¨å¥¨ã•ã‚Œã¾ã™ï¼ˆç‰¹ã«Reactã‚„Vueãªã©ã®ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã§é‡è¦ã§ã™ï¼‰ã€‚

-----

### ãªãœ `currentUser` ã‚ˆã‚Šã‚‚ `onAuthStateChanged` ã‚’ä½¿ã†ã¹ãã‹ï¼Ÿ

`auth.currentUser` ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’ä½¿ã£ã¦ã‚‚ã€ç¾åœ¨ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’å–å¾—ã§ãã¾ã™ã€‚ã—ã‹ã—ã€ã“ã‚Œã«ã¯ä¸€ã¤å¤§ããªæ³¨æ„ç‚¹ãŒã‚ã‚Šã¾ã™ã€‚

Firebase SDKãŒåˆæœŸåŒ–ã•ã‚Œã€æ°¸ç¶šåŒ–ã•ã‚ŒãŸèªè¨¼æƒ…å ±ã‚’éåŒæœŸã§èª­ã¿è¾¼ã‚“ã§ã„ã‚‹é–“ã€`auth.currentUser` ã¯ `null` ã«ãªã‚Šã¾ã™ã€‚ãã®ãŸã‚ã€ãƒšãƒ¼ã‚¸ã®èª­ã¿è¾¼ã¿ç›´å¾Œã« `auth.currentUser` ã‚’å‚ç…§ã™ã‚‹ã¨ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå®Ÿéš›ã«ã¯ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ã„ã‚‹ã«ã‚‚ã‹ã‹ã‚ã‚‰ãš `null` ãŒè¿”ã£ã¦ãã¦ã—ã¾ã†å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚

ä¸€æ–¹ã§ã€**`onAuthStateChanged` ã¯ã€ã“ã®åˆæœŸåŒ–ãƒ—ãƒ­ã‚»ã‚¹ãŒå®Œäº†ã—ã¦ã‹ã‚‰ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯é–¢æ•°ã‚’å®Ÿè¡Œã™ã‚‹ã“ã¨ã‚’ä¿è¨¼ã—ã¾ã™ã€‚** ãã®ãŸã‚ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®èª­ã¿è¾¼ã¿æ™‚ã«ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ­ã‚°ã‚¤ãƒ³çŠ¶æ…‹ã‚’ç¢ºå®Ÿã«æŠŠæ¡ã™ã‚‹ãŸã‚ã«ã¯ã€`auth.currentUser` ã§ã¯ãªã `onAuthStateChanged` ã‚’ä½¿ç”¨ã™ã‚‹ã®ãŒãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã§ã™ã€‚

-----

## å®Ÿè£…
`app/composables/useAuth.ts`ã®ä½¿ç”¨æ™‚ã«`onMounted`ã§ãƒ•ãƒƒã‚¯ã—`onAuthStateChanged`ã§Firebase Authã®çŠ¶æ…‹å¤‰æ›´ã‚’ç›£è¦–

```ts:app/composables/useAuth.ts
...ä¸­ç•¥
// èªè¨¼çŠ¶æ…‹ã®ç›£è¦–
onMounted(() => {
// Firebase AuthãŒåˆæœŸåŒ–ã•ã‚Œã¦ã„ãªã„å ´åˆã¯å‡¦ç†ã‚’çµ‚äº†
if (!auth) {
    loading.value = false
    return
}

// Firebase Authã®çŠ¶æ…‹å¤‰æ›´ã‚’ç›£è¦–ã™ã‚‹ãƒªã‚¹ãƒŠãƒ¼ã‚’è¨­å®š
// ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ­ã‚°ã‚¤ãƒ³ãƒ»ãƒ­ã‚°ã‚¢ã‚¦ãƒˆçŠ¶æ…‹ãŒå¤‰æ›´ã•ã‚Œã‚‹ãŸã³ã«å®Ÿè¡Œã•ã‚Œã‚‹
const unsubscribe = onAuthStateChanged(auth, (currentUser) => {
    // ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæœªèªè¨¼ã®å ´åˆã€ãƒ­ã‚°ã‚¤ãƒ³ãƒšãƒ¼ã‚¸ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ
    if (!currentUser) {
        navigateTo('/login')
    }
    // ç¾åœ¨ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’ãƒªã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãªå¤‰æ•°ã«ä¿å­˜
    user.value = currentUser
    // ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°çŠ¶æ…‹ã‚’è§£é™¤
    loading.value = false
})

// ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒã‚¢ãƒ³ãƒã‚¦ãƒ³ãƒˆã•ã‚Œã‚‹éš›ã«ãƒªã‚¹ãƒŠãƒ¼ã‚’è§£é™¤
// ãƒ¡ãƒ¢ãƒªãƒªãƒ¼ã‚¯ã‚’é˜²ããŸã‚ã®ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—å‡¦ç†
onUnmounted(() => unsubscribe())
})
...ä¸­ç•¥
```

### HOMEç”»é¢ã®å®Ÿè£…

```:ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 
app/
â”œâ”€â”€ pages/
â”‚   â”œâ”€â”€ home/
â”‚   â”‚   â””â”€â”€ index.vue
â”‚   â””â”€â”€ home.vue
```

```vue:app/pages/home.vue
<template>
  <div>
    <!-- ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°çŠ¶æ…‹ -->
    <div v-if="loading" class="loading">
      <v-progress-circular
        indeterminate
        color="primary"
        size="64"
      ></v-progress-circular>
      <p class="mt-4">èªè¨¼çŠ¶æ…‹ã‚’ç¢ºèªä¸­...</p>
    </div>
    <div v-else>
      <NuxtPage />
    </div>
  </div>
</template>

<script setup lang="ts">
const { loading } = useAuth()
</script>

<style scoped>
.loading {
  text-align: center;
  padding: 4rem 0;
}
</style>
```

HOMEãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå†…ã¯èªè¨¼ã«ã‚ˆã‚‹é–²è¦§åˆ¶é™ã‚’è¨­ã‘ã‚‹ç‚ºã€ãƒ«ãƒ¼ãƒˆã®è¦ªãƒ•ã‚¡ã‚¤ãƒ«ã§èªè¨¼ç¢ºèªã®å‡¦ç†ã‚’å®Ÿè£…

```vue:app/pages/home/index.vue
<template>
  <!-- èªè¨¼æ¸ˆã¿ãƒ¦ãƒ¼ã‚¶ãƒ¼ -->
  <v-card class="mx-auto" max-width="600">
    <v-card-item>
      <v-card-title class="text-center">
        ã‚ˆã†ã“ãã€{{ user?.email }}ã•ã‚“ï¼
      </v-card-title>
      <v-card-subtitle class="text-center">
        ãƒ­ã‚°ã‚¤ãƒ³èªè¨¼ãŒå®Œäº†ã—ã¾ã—ãŸ
      </v-card-subtitle>
    </v-card-item>

    <v-card-text>
      <v-alert
        v-if="error"
        type="error"
        :text="error"
        variant="tonal"
        class="mb-4"
      ></v-alert>

      <div class="user-info">
        <v-list>
          <v-list-item>
            <template #prepend>
              <v-icon>mdi-email</v-icon>
            </template>
            <v-list-item-title>ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹</v-list-item-title>
            <v-list-item-subtitle>{{ user?.email }}</v-list-item-subtitle>
          </v-list-item>

          <v-list-item>
            <template #prepend>
              <v-icon>mdi-account</v-icon>
            </template>
            <v-list-item-title>ãƒ¦ãƒ¼ã‚¶ãƒ¼ID</v-list-item-title>
            <v-list-item-subtitle>{{ user?.uid }}</v-list-item-subtitle>
          </v-list-item>

          <v-list-item>
            <template #prepend>
              <v-icon>mdi-calendar</v-icon>
            </template>
            <v-list-item-title>ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆæ—¥</v-list-item-title>
            <v-list-item-subtitle>
              {{ formatDate(user?.metadata.creationTime) }}
            </v-list-item-subtitle>
          </v-list-item>
        </v-list>
      </div>
    </v-card-text>

    <v-card-actions class="justify-center">
      <v-btn
        color="error"
        variant="outlined"
        :loading="logoutLoading"
        prepend-icon="mdi-logout"
        @click="handleLogout"
      >
        ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ
      </v-btn>
    </v-card-actions>
  </v-card>
</template>

<script setup lang="ts">
const { user, logout } = useAuth()

const error = ref('')
const logoutLoading = ref(false)

const handleLogout = async () => {
  error.value = ''
  logoutLoading.value = true

  try {
    const result = await logout()

    if (result.error) {
      error.value = result.error.message
    } else {
      // ãƒ­ã‚°ã‚¢ã‚¦ãƒˆæˆåŠŸæ™‚ã«ãƒ­ã‚°ã‚¤ãƒ³ãƒšãƒ¼ã‚¸ã«é·ç§»
      await navigateTo('/login')
    }
  } catch {
    error.value = 'ãƒ­ã‚°ã‚¢ã‚¦ãƒˆä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ'
  } finally {
    logoutLoading.value = false
  }
}

const formatDate = (dateString: string | undefined) => {
  if (!dateString) return 'ä¸æ˜'
  return new Date(dateString).toLocaleDateString('ja-JP', {
    year: 'numeric',
    month: 'long',
    day: 'numeric',
    hour: '2-digit',
    minute: '2-digit',
  })
}
</script>
```

![docs](/images/65c1d38ed8c694-1.png)
ã—ã‚Œã£ã¨ãƒ­ã‚°ã‚¤ãƒ³å‡¦ç†ã‚‚è¿½åŠ ã€èª¬æ˜ã™ã‚‹ã‚ˆã†ãªé›£ã—ã„å‡¦ç†ã§ã‚‚ãªã„ã®ã§ä»Šå›ã¯èª¬æ˜ã‚’çœç•¥
index.vueã¯ä»®ä½œæˆã§ä»Šå¾Œãƒ–ãƒ©ãƒƒã‚·ãƒ¥ã‚¢ãƒƒãƒ—ã—ã¦ã„ãäºˆå®š