---
title: "Vue3ã®çŠ¶æ…‹ç®¡ç†å®Œå…¨ã‚¬ã‚¤ãƒ‰ï¼šComposition APIã‹ã‚‰Piniaã¾ã§"
emoji: "ğŸ”„"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["vue", "javascript", "frontend", "pinia", "composition-api"]
published: false
---

# Vue3ã®çŠ¶æ…‹ç®¡ç†å®Œå…¨ã‚¬ã‚¤ãƒ‰ï¼šComposition APIã‹ã‚‰Piniaã¾ã§

Vue3ã§ã¯ã€çŠ¶æ…‹ç®¡ç†ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒãŒå¤§ããé€²åŒ–ã—ã¾ã—ãŸã€‚Composition APIã®å°å…¥ã«ã‚ˆã‚Šã€ã‚ˆã‚ŠæŸ”è»Ÿã§å‹å®‰å…¨ãªçŠ¶æ…‹ç®¡ç†ãŒå¯èƒ½ã«ãªã‚Šã€Piniaã®ç™»å ´ã§Vuexã«ä»£ã‚ã‚‹æ–°ã—ã„é¸æŠè‚¢ãŒç”Ÿã¾ã‚Œã¾ã—ãŸã€‚

ã“ã®è¨˜äº‹ã§ã¯ã€Vue3ã«ãŠã‘ã‚‹çŠ¶æ…‹ç®¡ç†ã®æ§˜ã€…ãªæ‰‹æ³•ã‚’è©³ã—ãè§£èª¬ã—ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«æœ€é©ãªé¸æŠè‚¢ã‚’è¦‹ã¤ã‘ã‚‹ãŸã‚ã®ã‚¬ã‚¤ãƒ‰ã‚’æä¾›ã—ã¾ã™ã€‚

## Vue3ã®çŠ¶æ…‹ç®¡ç†ã®æ¦‚è¦

### çŠ¶æ…‹ç®¡ç†ã¨ã¯

çŠ¶æ…‹ç®¡ç†ã¨ã¯ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å†…ã®ãƒ‡ãƒ¼ã‚¿ï¼ˆçŠ¶æ…‹ï¼‰ã‚’åŠ¹ç‡çš„ã«ç®¡ç†ã—ã€è¤‡æ•°ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆé–“ã§å…±æœ‰ã™ã‚‹ãŸã‚ã®ä»•çµ„ã¿ã§ã™ã€‚Vue3ã§ã¯ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®è¤‡é›‘ã•ã«å¿œã˜ã¦æ§˜ã€…ãªã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‚’é¸æŠã§ãã¾ã™ã€‚

### ãªãœçŠ¶æ…‹ç®¡ç†ãŒé‡è¦ãªã®ã‹

1. **ãƒ‡ãƒ¼ã‚¿ã®ä¸€å…ƒç®¡ç†**: ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å…¨ä½“ã§ä¸€è²«ã—ãŸãƒ‡ãƒ¼ã‚¿ç®¡ç†
2. **ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆé–“ã®é€šä¿¡**: è¦ªå­é–¢ä¿‚ã«ãªã„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆé–“ã§ã®ãƒ‡ãƒ¼ã‚¿å…±æœ‰
3. **äºˆæ¸¬å¯èƒ½ãªçŠ¶æ…‹å¤‰æ›´**: çŠ¶æ…‹ã®å¤‰æ›´ãŒè¿½è·¡ã—ã‚„ã™ãã€ãƒ‡ãƒãƒƒã‚°ãŒå®¹æ˜“
4. **å†åˆ©ç”¨æ€§ã®å‘ä¸Š**: ãƒ­ã‚¸ãƒƒã‚¯ã®åˆ†é›¢ã«ã‚ˆã‚Šã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®å†åˆ©ç”¨æ€§ãŒå‘ä¸Š

### Vue3ã§ã®çŠ¶æ…‹ç®¡ç†ã®é€²åŒ–

Vue2ã‹ã‚‰Vue3ã¸ã®ç§»è¡Œã«ã‚ˆã‚Šã€çŠ¶æ…‹ç®¡ç†ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒãŒå¤§ããå¤‰åŒ–ã—ã¾ã—ãŸï¼š

- **Options API â†’ Composition API**: ã‚ˆã‚ŠæŸ”è»Ÿã§å‹å®‰å…¨ãªæ›¸ãæ–¹
- **Vuex â†’ Pinia**: ã‚ˆã‚Šè»½é‡ã§ç›´æ„Ÿçš„ãªçŠ¶æ…‹ç®¡ç†ãƒ©ã‚¤ãƒ–ãƒ©ãƒª
- **TypeScriptå¯¾å¿œã®å‘ä¸Š**: å‹å®‰å…¨æ€§ã®å¤§å¹…ãªæ”¹å–„

Vue3ã§ã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ãªçŠ¶æ…‹ç®¡ç†ã®é¸æŠè‚¢ãŒã‚ã‚Šã¾ã™ï¼š

- **Composition API**: ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå†…ã§ã®çŠ¶æ…‹ç®¡ç†
- **Provide/Inject**: è¦ªå­é–“ã§ã®çŠ¶æ…‹å…±æœ‰
- **Pinia**: ã‚°ãƒ­ãƒ¼ãƒãƒ«çŠ¶æ…‹ç®¡ç†ãƒ©ã‚¤ãƒ–ãƒ©ãƒª
- **Vuex**: å¾“æ¥ã®çŠ¶æ…‹ç®¡ç†ãƒ©ã‚¤ãƒ–ãƒ©ãƒªï¼ˆãƒ¬ã‚¬ã‚·ãƒ¼ï¼‰

### çŠ¶æ…‹ç®¡ç†ã®é¸æŠåŸºæº–

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®è¦æ¨¡ã¨è¦ä»¶ã«å¿œã˜ã¦ã€é©åˆ‡ãªçŠ¶æ…‹ç®¡ç†æ‰‹æ³•ã‚’é¸æŠã™ã‚‹ã“ã¨ãŒé‡è¦ã§ã™ï¼š

#### å°è¦æ¨¡ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆï¼ˆã€œ10ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼‰
- **æ¨å¥¨**: Composition API + Provide/Inject
- **ç†ç”±**: ã‚·ãƒ³ãƒ—ãƒ«ã§å­¦ç¿’ã‚³ã‚¹ãƒˆãŒä½ãã€éåº¦ãªæŠ½è±¡åŒ–ã‚’é¿ã‘ã‚‰ã‚Œã‚‹
- **é©ç”¨ä¾‹**: ãƒ©ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ãƒšãƒ¼ã‚¸ã€ç°¡å˜ãªãƒ•ã‚©ãƒ¼ãƒ ã€å°è¦æ¨¡ãªãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰

#### ä¸­è¦æ¨¡ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆï¼ˆ10ã€œ50ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼‰
- **æ¨å¥¨**: Piniaï¼ˆå˜ä¸€ã‚¹ãƒˆã‚¢ï¼‰
- **ç†ç”±**: ã‚°ãƒ­ãƒ¼ãƒãƒ«çŠ¶æ…‹ã®ç®¡ç†ãŒå®¹æ˜“ã§ã€é–‹ç™ºè€…ä½“é¨“ãŒè‰¯ã„
- **é©ç”¨ä¾‹**: ECã‚µã‚¤ãƒˆã€ãƒ–ãƒ­ã‚°ã€ç®¡ç†ç”»é¢

#### å¤§è¦æ¨¡ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆï¼ˆ50ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆä»¥ä¸Šï¼‰
- **æ¨å¥¨**: Pinia + è¤‡æ•°ã‚¹ãƒˆã‚¢ã®åˆ†å‰²
- **ç†ç”±**: ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åŒ–ã«ã‚ˆã‚Šä¿å®ˆæ€§ã¨ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£ã‚’ç¢ºä¿
- **é©ç”¨ä¾‹**: ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ—ãƒ©ã‚¤ã‚ºã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã€è¤‡é›‘ãªSaaS

### å„æ‰‹æ³•ã®è©³ç´°æ¯”è¼ƒ

| æ‰‹æ³• | å­¦ç¿’ã‚³ã‚¹ãƒˆ | å‹å®‰å…¨æ€§ | ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ | ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£ | é©ç”¨è¦æ¨¡ |
|------|------------|----------|----------------|------------------|----------|
| Composition API | ğŸŸ¢ ä½ã„ | ğŸŸ¢ é«˜ã„ | ğŸŸ¢ é«˜ã„ | ğŸŸ¡ ä¸­ç¨‹åº¦ | å°ã€œä¸­ |
| Provide/Inject | ğŸŸ¢ ä½ã„ | ğŸŸ¡ ä¸­ç¨‹åº¦ | ğŸŸ¢ é«˜ã„ | ğŸ”´ ä½ã„ | å° |
| Pinia | ğŸŸ¡ ä¸­ç¨‹åº¦ | ğŸŸ¢ é«˜ã„ | ğŸŸ¢ é«˜ã„ | ğŸŸ¢ é«˜ã„ | ä¸­ã€œå¤§ |
| Vuex | ğŸ”´ é«˜ã„ | ğŸŸ¡ ä¸­ç¨‹åº¦ | ğŸŸ¡ ä¸­ç¨‹åº¦ | ğŸŸ¢ é«˜ã„ | å¤§ |

## Composition APIã‚’ä½¿ã£ãŸçŠ¶æ…‹ç®¡ç†

Composition APIã¯ã€Vue3ã®æ–°æ©Ÿèƒ½ã¨ã—ã¦å°å…¥ã•ã‚ŒãŸã€ã‚ˆã‚ŠæŸ”è»Ÿãªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®æ›¸ãæ–¹ã§ã™ã€‚çŠ¶æ…‹ç®¡ç†ã«ãŠã„ã¦ã‚‚å¼·åŠ›ãªæ©Ÿèƒ½ã‚’æä¾›ã—ã¾ã™ã€‚

### Composition APIã®ç‰¹å¾´

1. **è«–ç†çš„ãªé–¢å¿ƒã®åˆ†é›¢**: é–¢é€£ã™ã‚‹ãƒ­ã‚¸ãƒƒã‚¯ã‚’ä¸€ç®‡æ‰€ã«ã¾ã¨ã‚ã‚‹ã“ã¨ãŒã§ãã‚‹
2. **å†åˆ©ç”¨æ€§ã®å‘ä¸Š**: ã‚«ã‚¹ã‚¿ãƒ ã‚³ãƒ³ãƒãƒ¼ã‚¶ãƒ–ãƒ«ã¨ã—ã¦ãƒ­ã‚¸ãƒƒã‚¯ã‚’æŠ½å‡ºå¯èƒ½
3. **å‹å®‰å…¨æ€§**: TypeScriptã¨ã®è¦ªå’Œæ€§ãŒé«˜ã„
4. **ãƒ„ãƒªãƒ¼ã‚·ã‚§ã‚¤ã‚­ãƒ³ã‚°**: ä½¿ç”¨ã•ã‚Œã¦ã„ãªã„æ©Ÿèƒ½ã‚’è‡ªå‹•çš„ã«é™¤å¤–

### åŸºæœ¬çš„ãªãƒªã‚¢ã‚¯ãƒ†ã‚£ãƒ–API

Composition APIã§ã¯ã€ä»¥ä¸‹ã®ãƒªã‚¢ã‚¯ãƒ†ã‚£ãƒ–APIã‚’ä½¿ç”¨ã—ã¦çŠ¶æ…‹ã‚’ç®¡ç†ã—ã¾ã™ï¼š

- **ref()**: ãƒ—ãƒªãƒŸãƒ†ã‚£ãƒ–å‹ã®å€¤ã‚’ãƒªã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã«ã™ã‚‹
- **reactive()**: ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ãƒªã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã«ã™ã‚‹
- **computed()**: è¨ˆç®—ã•ã‚ŒãŸãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’ä½œæˆ
- **watch()**: çŠ¶æ…‹ã®å¤‰æ›´ã‚’ç›£è¦–
- **watchEffect()**: å‰¯ä½œç”¨ã‚’è‡ªå‹•çš„ã«è¿½è·¡

### åŸºæœ¬çš„ãªçŠ¶æ…‹ç®¡ç†

#### ref()ã‚’ä½¿ã£ãŸçŠ¶æ…‹ç®¡ç†

`ref()`ã¯ã€ãƒ—ãƒªãƒŸãƒ†ã‚£ãƒ–å‹ï¼ˆæ–‡å­—åˆ—ã€æ•°å€¤ã€çœŸå½å€¤ãªã©ï¼‰ã®å€¤ã‚’ãƒªã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã«ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã—ã¾ã™ã€‚

```javascript
// composables/useCounter.js
import { ref, computed } from 'vue'

export function useCounter(initialValue = 0) {
  // ref()ã§ãƒªã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãªçŠ¶æ…‹ã‚’ä½œæˆ
  const count = ref(initialValue)
  
  // çŠ¶æ…‹ã‚’å¤‰æ›´ã™ã‚‹é–¢æ•°
  const increment = () => {
    count.value++ // .valueã§ã‚¢ã‚¯ã‚»ã‚¹
  }
  
  const decrement = () => {
    count.value--
  }
  
  const reset = () => {
    count.value = initialValue
  }
  
  // è¨ˆç®—ã•ã‚ŒãŸãƒ—ãƒ­ãƒ‘ãƒ†ã‚£
  const doubleCount = computed(() => count.value * 2)
  const isEven = computed(() => count.value % 2 === 0)
  
  return {
    count,        // ãƒªã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãªçŠ¶æ…‹
    increment,    // çŠ¶æ…‹ã‚’å¤‰æ›´ã™ã‚‹é–¢æ•°
    decrement,
    reset,
    doubleCount,  // è¨ˆç®—ã•ã‚ŒãŸãƒ—ãƒ­ãƒ‘ãƒ†ã‚£
    isEven
  }
}
```

#### reactive()ã‚’ä½¿ã£ãŸçŠ¶æ…‹ç®¡ç†

`reactive()`ã¯ã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ãƒªã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã«ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã—ã¾ã™ã€‚ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã«ç›´æ¥ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã™ã€‚

```javascript
// composables/useUser.js
import { reactive, computed } from 'vue'

export function useUser() {
  // reactive()ã§ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ãƒªã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã«ã™ã‚‹
  const user = reactive({
    name: '',
    email: '',
    age: 0,
    preferences: {
      theme: 'light',
      language: 'ja'
    }
  })
  
  // çŠ¶æ…‹ã‚’æ›´æ–°ã™ã‚‹é–¢æ•°
  const updateUser = (userData) => {
    Object.assign(user, userData)
  }
  
  const updatePreference = (key, value) => {
    user.preferences[key] = value
  }
  
  // è¨ˆç®—ã•ã‚ŒãŸãƒ—ãƒ­ãƒ‘ãƒ†ã‚£
  const displayName = computed(() => {
    return user.name || 'ã‚²ã‚¹ãƒˆãƒ¦ãƒ¼ã‚¶ãƒ¼'
  })
  
  const isAdult = computed(() => user.age >= 18)
  
  return {
    user,
    updateUser,
    updatePreference,
    displayName,
    isAdult
  }
}
```

### ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ã®ä½¿ç”¨

#### åŸºæœ¬çš„ãªä½¿ç”¨ä¾‹

```vue
<template>
  <div class="counter">
    <h3>ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã‚¢ãƒ—ãƒª</h3>
    <p>ç¾åœ¨ã®å€¤: {{ count }}</p>
    <p>2å€ã®å€¤: {{ doubleCount }}</p>
    <p>å¶æ•°ã‹ã©ã†ã‹: {{ isEven ? 'å¶æ•°' : 'å¥‡æ•°' }}</p>
    
    <div class="buttons">
      <button @click="increment" :disabled="count >= 10">+</button>
      <button @click="decrement" :disabled="count <= 0">-</button>
      <button @click="reset">ãƒªã‚»ãƒƒãƒˆ</button>
    </div>
  </div>
</template>

<script setup>
import { useCounter } from '@/composables/useCounter'

// ã‚«ã‚¹ã‚¿ãƒ ã‚³ãƒ³ãƒãƒ¼ã‚¶ãƒ–ãƒ«ã‚’ä½¿ç”¨
const { count, increment, decrement, reset, doubleCount, isEven } = useCounter(5)
</script>

<style scoped>
.counter {
  padding: 20px;
  border: 1px solid #ddd;
  border-radius: 8px;
  max-width: 300px;
}

.buttons {
  display: flex;
  gap: 10px;
  margin-top: 10px;
}

button {
  padding: 8px 16px;
  border: none;
  border-radius: 4px;
  cursor: pointer;
}

button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}
</style>
```

#### è¤‡æ•°ã®ã‚³ãƒ³ãƒãƒ¼ã‚¶ãƒ–ãƒ«ã®çµ„ã¿åˆã‚ã›

```vue
<template>
  <div class="user-profile">
    <h2>ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«</h2>
    
    <!-- ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼éƒ¨åˆ† -->
    <div class="counter-section">
      <h3>ã‚¢ã‚¯ã‚·ãƒ§ãƒ³å›æ•°: {{ count }}</h3>
      <button @click="increment">ã‚¢ã‚¯ã‚·ãƒ§ãƒ³å®Ÿè¡Œ</button>
    </div>
    
    <!-- ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±éƒ¨åˆ† -->
    <div class="user-section">
      <p>åå‰: {{ displayName }}</p>
      <p>å¹´é½¢: {{ user.age }}æ­³ ({{ isAdult ? 'æˆäºº' : 'æœªæˆå¹´' }})</p>
      <p>ãƒ†ãƒ¼ãƒ: {{ user.preferences.theme }}</p>
      
      <button @click="toggleTheme">
        ãƒ†ãƒ¼ãƒã‚’{{ user.preferences.theme === 'light' ? 'ãƒ€ãƒ¼ã‚¯' : 'ãƒ©ã‚¤ãƒˆ' }}ã«å¤‰æ›´
      </button>
    </div>
  </div>
</template>

<script setup>
import { useCounter } from '@/composables/useCounter'
import { useUser } from '@/composables/useUser'

// è¤‡æ•°ã®ã‚³ãƒ³ãƒãƒ¼ã‚¶ãƒ–ãƒ«ã‚’çµ„ã¿åˆã‚ã›
const { count, increment } = useCounter()
const { user, displayName, isAdult, updatePreference } = useUser()

// ãƒ†ãƒ¼ãƒåˆ‡ã‚Šæ›¿ãˆæ©Ÿèƒ½
const toggleTheme = () => {
  const newTheme = user.preferences.theme === 'light' ? 'dark' : 'light'
  updatePreference('theme', newTheme)
}
</script>
```

### è¤‡æ•°ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆé–“ã§ã®çŠ¶æ…‹å…±æœ‰

#### ã‚°ãƒ­ãƒ¼ãƒãƒ«çŠ¶æ…‹ã®ç®¡ç†

è¤‡æ•°ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆé–“ã§çŠ¶æ…‹ã‚’å…±æœ‰ã™ã‚‹å ´åˆã€ã‚°ãƒ­ãƒ¼ãƒãƒ«ãªçŠ¶æ…‹ã‚’ä½œæˆã—ã¾ã™ã€‚

```javascript
// composables/useSharedState.js
import { ref, readonly } from 'vue'

// ã‚°ãƒ­ãƒ¼ãƒãƒ«ãªçŠ¶æ…‹ï¼ˆãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãƒ¬ãƒ™ãƒ«ã§å®šç¾©ï¼‰
const globalState = ref({
  user: null,
  theme: 'light',
  notifications: [],
  isLoading: false
})

// çŠ¶æ…‹ã‚’å¤‰æ›´ã™ã‚‹é–¢æ•°
const setUser = (user) => {
  globalState.value.user = user
}

const setTheme = (theme) => {
  globalState.value.theme = theme
  // ãƒ†ãƒ¼ãƒå¤‰æ›´æ™‚ã«localStorageã«ã‚‚ä¿å­˜
  localStorage.setItem('theme', theme)
}

const addNotification = (notification) => {
  globalState.value.notifications.push({
    id: Date.now(),
    message: notification.message,
    type: notification.type || 'info',
    timestamp: new Date()
  })
}

const removeNotification = (id) => {
  const index = globalState.value.notifications.findIndex(n => n.id === id)
  if (index > -1) {
    globalState.value.notifications.splice(index, 1)
  }
}

const setLoading = (loading) => {
  globalState.value.isLoading = loading
}

// ã‚³ãƒ³ãƒãƒ¼ã‚¶ãƒ–ãƒ«é–¢æ•°
export function useSharedState() {
  return {
    // readonly()ã§èª­ã¿å–ã‚Šå°‚ç”¨ã«ã—ã¦ã€ç›´æ¥å¤‰æ›´ã‚’é˜²ã
    globalState: readonly(globalState),
    setUser,
    setTheme,
    addNotification,
    removeNotification,
    setLoading
  }
}
```

#### Provide/Injectã‚’ä½¿ã£ãŸçŠ¶æ…‹å…±æœ‰

è¦ªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‹ã‚‰å­ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«çŠ¶æ…‹ã‚’æä¾›ã™ã‚‹å ´åˆã€Provide/Injectãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚

```javascript
// composables/useProvideState.js
import { provide, inject, ref } from 'vue'

// ã‚­ãƒ¼ã‚’å®šç¾©
const STATE_KEY = Symbol('sharedState')

// è¦ªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§çŠ¶æ…‹ã‚’æä¾›
export function provideState() {
  const state = ref({
    user: null,
    theme: 'light'
  })
  
  const updateUser = (user) => {
    state.value.user = user
  }
  
  const updateTheme = (theme) => {
    state.value.theme = theme
  }
  
  // å­ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«çŠ¶æ…‹ã‚’æä¾›
  provide(STATE_KEY, {
    state: readonly(state),
    updateUser,
    updateTheme
  })
  
  return { state, updateUser, updateTheme }
}

// å­ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§çŠ¶æ…‹ã‚’æ³¨å…¥
export function injectState() {
  const injected = inject(STATE_KEY)
  
  if (!injected) {
    throw new Error('useProvideState()ãŒè¦ªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§å‘¼ã³å‡ºã•ã‚Œã¦ã„ã¾ã›ã‚“')
  }
  
  return injected
}
```

#### ä½¿ç”¨ä¾‹

```vue
<!-- è¦ªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ -->
<template>
  <div class="app">
    <Header />
    <MainContent />
    <Footer />
  </div>
</template>

<script setup>
import { provideState } from '@/composables/useProvideState'
import Header from './Header.vue'
import MainContent from './MainContent.vue'
import Footer from './Footer.vue'

// çŠ¶æ…‹ã‚’æä¾›
provideState()
</script>
```

```vue
<!-- å­ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ -->
<template>
  <div class="header">
    <h1>{{ state.user?.name || 'ã‚²ã‚¹ãƒˆ' }}ã•ã‚“ã€ã“ã‚“ã«ã¡ã¯ï¼</h1>
    <button @click="toggleTheme">
      ãƒ†ãƒ¼ãƒ: {{ state.theme }}
    </button>
  </div>
</template>

<script setup>
import { injectState } from '@/composables/useProvideState'

// çŠ¶æ…‹ã‚’æ³¨å…¥
const { state, updateTheme } = injectState()

const toggleTheme = () => {
  const newTheme = state.theme === 'light' ? 'dark' : 'light'
  updateTheme(newTheme)
}
</script>
```

## Piniaã«ã‚ˆã‚‹çŠ¶æ…‹ç®¡ç†

Piniaã¯ã€Vue3ã®å…¬å¼çŠ¶æ…‹ç®¡ç†ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨ã—ã¦æ¨å¥¨ã•ã‚Œã¦ã„ã‚‹ã€Vuexã®å¾Œç¶™ã¨ãªã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã™ã€‚

### ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã¨ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

```bash
npm install pinia
```

```javascript
// main.js
import { createApp } from 'vue'
import { createPinia } from 'pinia'
import App from './App.vue'

const app = createApp(App)
app.use(createPinia())
app.mount('#app')
```

### åŸºæœ¬çš„ãªã‚¹ãƒˆã‚¢ã®ä½œæˆ

```javascript
// stores/counter.js
import { defineStore } from 'pinia'

export const useCounterStore = defineStore('counter', {
  state: () => ({
    count: 0,
    name: 'Counter Store'
  }),
  
  getters: {
    doubleCount: (state) => state.count * 2,
    greeting: (state) => `Hello, ${state.name}!`
  },
  
  actions: {
    increment() {
      this.count++
    },
    
    decrement() {
      this.count--
    },
    
    async fetchData() {
      try {
        const response = await fetch('/api/data')
        const data = await response.json()
        this.count = data.count
      } catch (error) {
        console.error('Failed to fetch data:', error)
      }
    }
  }
})
```

### Composition APIã‚¹ã‚¿ã‚¤ãƒ«ã§ã®ã‚¹ãƒˆã‚¢

```javascript
// stores/user.js
import { defineStore } from 'pinia'
import { ref, computed } from 'vue'

export const useUserStore = defineStore('user', () => {
  // State
  const user = ref(null)
  const isLoading = ref(false)
  
  // Getters
  const isLoggedIn = computed(() => !!user.value)
  const userName = computed(() => user.value?.name || 'Guest')
  
  // Actions
  const login = async (credentials) => {
    isLoading.value = true
    try {
      const response = await fetch('/api/login', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(credentials)
      })
      user.value = await response.json()
    } catch (error) {
      console.error('Login failed:', error)
      throw error
    } finally {
      isLoading.value = false
    }
  }
  
  const logout = () => {
    user.value = null
  }
  
  return {
    user,
    isLoading,
    isLoggedIn,
    userName,
    login,
    logout
  }
})
```

### ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ã®ä½¿ç”¨

```vue
<template>
  <div>
    <div v-if="userStore.isLoading">ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ä¸­...</div>
    <div v-else-if="userStore.isLoggedIn">
      <h2>ã“ã‚“ã«ã¡ã¯ã€{{ userStore.userName }}ã•ã‚“ï¼</h2>
      <button @click="userStore.logout">ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ</button>
    </div>
    <div v-else>
      <button @click="handleLogin">ãƒ­ã‚°ã‚¤ãƒ³</button>
    </div>
  </div>
</template>

<script setup>
import { useUserStore } from '@/stores/user'

const userStore = useUserStore()

const handleLogin = async () => {
  try {
    await userStore.login({
      email: 'user@example.com',
      password: 'password'
    })
  } catch (error) {
    alert('ãƒ­ã‚°ã‚¤ãƒ³ã«å¤±æ•—ã—ã¾ã—ãŸ')
  }
}
</script>
```

## Vuexã¨ã®æ¯”è¼ƒ

| ç‰¹å¾´ | Pinia | Vuex |
|------|-------|------|
| Vue3å¯¾å¿œ | âœ… å®Œå…¨å¯¾å¿œ | âš ï¸ 4.xã§å¯¾å¿œ |
| TypeScript | âœ… å®Œå…¨å¯¾å¿œ | âš ï¸ å‹æ¨è«–ãŒé™å®šçš„ |
| DevTools | âœ… å¯¾å¿œ | âœ… å¯¾å¿œ |
| å­¦ç¿’ã‚³ã‚¹ãƒˆ | ğŸŸ¢ ä½ã„ | ğŸŸ¡ ä¸­ç¨‹åº¦ |
| ãƒœã‚¤ãƒ©ãƒ¼ãƒ—ãƒ¬ãƒ¼ãƒˆ | ğŸŸ¢ å°‘ãªã„ | ğŸ”´ å¤šã„ |
| ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åˆ†å‰² | ğŸŸ¢ ç°¡å˜ | ğŸŸ¡ è¤‡é›‘ |

### ç§»è¡Œã®ãƒ¡ãƒªãƒƒãƒˆ

Vuexã‹ã‚‰Piniaã¸ã®ç§»è¡Œã«ã¯ä»¥ä¸‹ã®ãƒ¡ãƒªãƒƒãƒˆãŒã‚ã‚Šã¾ã™ï¼š

1. **å‹å®‰å…¨æ€§ã®å‘ä¸Š**: TypeScriptã¨ã®è¦ªå’Œæ€§ãŒé«˜ã„
2. **ã‚³ãƒ¼ãƒ‰ã®ç°¡æ½”æ€§**: ãƒœã‚¤ãƒ©ãƒ¼ãƒ—ãƒ¬ãƒ¼ãƒˆãŒå°‘ãªã„
3. **é–‹ç™ºä½“é¨“ã®å‘ä¸Š**: ã‚ˆã‚Šç›´æ„Ÿçš„ãªAPI
4. **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹**: ã‚ˆã‚Šè»½é‡ã§é«˜é€Ÿ

## å®Ÿè·µçš„ãªä½¿ç”¨ä¾‹

### è¤‡æ•°ã‚¹ãƒˆã‚¢ã®é€£æº

```javascript
// stores/cart.js
import { defineStore } from 'pinia'
import { useUserStore } from './user'

export const useCartStore = defineStore('cart', () => {
  const items = ref([])
  const userStore = useUserStore()
  
  const addItem = (product) => {
    if (!userStore.isLoggedIn) {
      throw new Error('ãƒ­ã‚°ã‚¤ãƒ³ãŒå¿…è¦ã§ã™')
    }
    items.value.push(product)
  }
  
  const totalPrice = computed(() => {
    return items.value.reduce((sum, item) => sum + item.price, 0)
  })
  
  return {
    items,
    addItem,
    totalPrice
  }
})
```

### æ°¸ç¶šåŒ–ã®å®Ÿè£…

```javascript
// stores/settings.js
import { defineStore } from 'pinia'
import { ref } from 'vue'

export const useSettingsStore = defineStore('settings', () => {
  const theme = ref(localStorage.getItem('theme') || 'light')
  const language = ref(localStorage.getItem('language') || 'ja')
  
  const setTheme = (newTheme) => {
    theme.value = newTheme
    localStorage.setItem('theme', newTheme)
  }
  
  const setLanguage = (newLanguage) => {
    language.value = newLanguage
    localStorage.setItem('language', newLanguage)
  }
  
  return {
    theme,
    language,
    setTheme,
    setLanguage
  }
})
```

### éåŒæœŸå‡¦ç†ã®ç®¡ç†

```javascript
// stores/posts.js
import { defineStore } from 'pinia'
import { ref } from 'vue'

export const usePostsStore = defineStore('posts', () => {
  const posts = ref([])
  const loading = ref(false)
  const error = ref(null)
  
  const fetchPosts = async () => {
    loading.value = true
    error.value = null
    
    try {
      const response = await fetch('/api/posts')
      if (!response.ok) {
        throw new Error('Failed to fetch posts')
      }
      posts.value = await response.json()
    } catch (err) {
      error.value = err.message
    } finally {
      loading.value = false
    }
  }
  
  const createPost = async (postData) => {
    try {
      const response = await fetch('/api/posts', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(postData)
      })
      
      if (!response.ok) {
        throw new Error('Failed to create post')
      }
      
      const newPost = await response.json()
      posts.value.push(newPost)
    } catch (err) {
      error.value = err.message
      throw err
    }
  }
  
  return {
    posts,
    loading,
    error,
    fetchPosts,
    createPost
  }
})
```

## ã¾ã¨ã‚

Vue3ã®çŠ¶æ…‹ç®¡ç†ã¯ã€Composition APIã¨Piniaã®çµ„ã¿åˆã‚ã›ã«ã‚ˆã‚Šã€ã‚ˆã‚ŠæŸ”è»Ÿã§ä¿å®ˆæ€§ã®é«˜ã„ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®æ§‹ç¯‰ãŒå¯èƒ½ã«ãªã‚Šã¾ã—ãŸã€‚

### é¸æŠã®æŒ‡é‡

- **å°è¦æ¨¡ã‚¢ãƒ—ãƒª**: Composition API + Provide/Inject
- **ä¸­è¦æ¨¡ã‚¢ãƒ—ãƒª**: Piniaï¼ˆå˜ä¸€ã‚¹ãƒˆã‚¢ï¼‰
- **å¤§è¦æ¨¡ã‚¢ãƒ—ãƒª**: Piniaï¼ˆè¤‡æ•°ã‚¹ãƒˆã‚¢ã®åˆ†å‰²ï¼‰

### ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

1. **é©åˆ‡ãªç²’åº¦ã§ã®ã‚¹ãƒˆã‚¢åˆ†å‰²**
2. **å‹å®‰å…¨æ€§ã®ç¢ºä¿**
3. **éåŒæœŸå‡¦ç†ã®é©åˆ‡ãªç®¡ç†**
4. **çŠ¶æ…‹ã®æ°¸ç¶šåŒ–ã®æ¤œè¨**
5. **ãƒ†ã‚¹ãƒˆã®æ›¸ãã‚„ã™ã•ã‚’è€ƒæ…®**

Vue3ã®çŠ¶æ…‹ç®¡ç†ã‚’é©åˆ‡ã«æ´»ç”¨ã™ã‚‹ã“ã¨ã§ã€ã‚¹ã‚±ãƒ¼ãƒ©ãƒ–ãƒ«ã§ä¿å®ˆæ€§ã®é«˜ã„ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æ§‹ç¯‰ã§ãã¾ã™ã€‚ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®è¦ä»¶ã«å¿œã˜ã¦ã€æœ€é©ãªæ‰‹æ³•ã‚’é¸æŠã—ã€æ®µéšçš„ã«å°å…¥ã—ã¦ã„ãã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚

## ã‚ˆãã‚ã‚‹å•é¡Œã¨è§£æ±ºæ–¹æ³•

### 1. ãƒªã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£ã®å¤±åŠ¹

#### å•é¡Œ
```javascript
// âŒ é–“é•ã£ãŸä¾‹
const state = reactive({ count: 0 })
state = { count: 1 } // ãƒªã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£ãŒå¤±ã‚ã‚Œã‚‹
```

#### è§£æ±ºæ–¹æ³•
```javascript
// âœ… æ­£ã—ã„ä¾‹
const state = reactive({ count: 0 })
state.count = 1 // ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’ç›´æ¥å¤‰æ›´

// ã¾ãŸã¯
Object.assign(state, { count: 1 })
```

### 2. é…åˆ—ã®æ“ä½œ

#### å•é¡Œ
```javascript
// âŒ é–“é•ã£ãŸä¾‹
const items = reactive([])
items = [...items, newItem] // ãƒªã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£ãŒå¤±ã‚ã‚Œã‚‹
```

#### è§£æ±ºæ–¹æ³•
```javascript
// âœ… æ­£ã—ã„ä¾‹
const items = reactive([])
items.push(newItem) // é…åˆ—ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ç”¨

// ã¾ãŸã¯
items.splice(items.length, 0, newItem)
```

### 3. éåŒæœŸå‡¦ç†ã§ã®çŠ¶æ…‹æ›´æ–°

#### å•é¡Œ
```javascript
// âŒ é–“é•ã£ãŸä¾‹
const fetchData = async () => {
  const response = await fetch('/api/data')
  const data = await response.json()
  // ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒã‚¢ãƒ³ãƒã‚¦ãƒ³ãƒˆã•ã‚ŒãŸå¾Œã«çŠ¶æ…‹ã‚’æ›´æ–°ã™ã‚‹å¯èƒ½æ€§
  state.data = data
}
```

#### è§£æ±ºæ–¹æ³•
```javascript
// âœ… æ­£ã—ã„ä¾‹
import { onUnmounted } from 'vue'

const fetchData = async () => {
  let isCancelled = false
  
  onUnmounted(() => {
    isCancelled = true
  })
  
  try {
    const response = await fetch('/api/data')
    const data = await response.json()
    
    if (!isCancelled) {
      state.data = data
    }
  } catch (error) {
    if (!isCancelled) {
      state.error = error.message
    }
  }
}
```

### 4. ãƒ¡ãƒ¢ãƒªãƒªãƒ¼ã‚¯ã®é˜²æ­¢

#### å•é¡Œ
```javascript
// âŒ é–“é•ã£ãŸä¾‹
const setup = () => {
  const timer = setInterval(() => {
    // ä½•ã‹ã®å‡¦ç†
  }, 1000)
  // ã‚¿ã‚¤ãƒãƒ¼ãŒã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ã•ã‚Œãªã„
}
```

#### è§£æ±ºæ–¹æ³•
```javascript
// âœ… æ­£ã—ã„ä¾‹
import { onUnmounted } from 'vue'

const setup = () => {
  const timer = setInterval(() => {
    // ä½•ã‹ã®å‡¦ç†
  }, 1000)
  
  onUnmounted(() => {
    clearInterval(timer)
  })
}
```

## ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

### 1. ä¸è¦ãªå†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã®é˜²æ­¢

#### å•é¡Œ
```javascript
// âŒ é–“é•ã£ãŸä¾‹
const expensiveComputed = computed(() => {
  // é‡ã„è¨ˆç®—å‡¦ç†
  return heavyCalculation(state.data)
})
```

#### è§£æ±ºæ–¹æ³•
```javascript
// âœ… æ­£ã—ã„ä¾‹
const expensiveComputed = computed(() => {
  // ä¾å­˜é–¢ä¿‚ã‚’æœ€å°é™ã«
  return heavyCalculation(state.essentialData)
})

// ã¾ãŸã¯ã€shallowRefã‚’ä½¿ç”¨
const heavyData = shallowRef(null)
```

### 2. å¤§é‡ãƒ‡ãƒ¼ã‚¿ã®å‡¦ç†

#### å•é¡Œ
```javascript
// âŒ é–“é•ã£ãŸä¾‹
const largeList = reactive(Array.from({ length: 10000 }, (_, i) => ({ id: i })))
```

#### è§£æ±ºæ–¹æ³•
```javascript
// âœ… æ­£ã—ã„ä¾‹
const largeList = shallowReactive(Array.from({ length: 10000 }, (_, i) => ({ id: i })))

// ã¾ãŸã¯ã€ä»®æƒ³ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚’ä½¿ç”¨
import { VirtualList } from '@tanstack/vue-virtual'
```

### 3. ãƒ‡ãƒã‚¦ãƒ³ã‚¹ã¨ã‚¹ãƒ­ãƒƒãƒˆãƒ«

```javascript
// composables/useDebounce.js
import { ref, watch } from 'vue'

export function useDebounce(value, delay = 300) {
  const debouncedValue = ref(value.value)
  
  watch(value, (newValue) => {
    const timer = setTimeout(() => {
      debouncedValue.value = newValue
    }, delay)
    
    return () => clearTimeout(timer)
  })
  
  return debouncedValue
}

// ä½¿ç”¨ä¾‹
const searchQuery = ref('')
const debouncedQuery = useDebounce(searchQuery, 500)
```

## ãƒ†ã‚¹ãƒˆæˆ¦ç•¥

### 1. ã‚³ãƒ³ãƒãƒ¼ã‚¶ãƒ–ãƒ«ã®ãƒ†ã‚¹ãƒˆ

```javascript
// tests/useCounter.test.js
import { describe, it, expect } from 'vitest'
import { useCounter } from '@/composables/useCounter'

describe('useCounter', () => {
  it('åˆæœŸå€¤ãŒæ­£ã—ãè¨­å®šã•ã‚Œã‚‹', () => {
    const { count } = useCounter(5)
    expect(count.value).toBe(5)
  })
  
  it('incrementãŒæ­£ã—ãå‹•ä½œã™ã‚‹', () => {
    const { count, increment } = useCounter(0)
    increment()
    expect(count.value).toBe(1)
  })
  
  it('computedãŒæ­£ã—ãå‹•ä½œã™ã‚‹', () => {
    const { count, doubleCount, increment } = useCounter(2)
    expect(doubleCount.value).toBe(4)
    
    increment()
    expect(doubleCount.value).toBe(6)
  })
})
```

### 2. Piniaã‚¹ãƒˆã‚¢ã®ãƒ†ã‚¹ãƒˆ

```javascript
// tests/stores/counter.test.js
import { describe, it, expect, beforeEach } from 'vitest'
import { setActivePinia, createPinia } from 'pinia'
import { useCounterStore } from '@/stores/counter'

describe('Counter Store', () => {
  beforeEach(() => {
    setActivePinia(createPinia())
  })
  
  it('åˆæœŸçŠ¶æ…‹ãŒæ­£ã—ã„', () => {
    const store = useCounterStore()
    expect(store.count).toBe(0)
  })
  
  it('incrementãŒæ­£ã—ãå‹•ä½œã™ã‚‹', () => {
    const store = useCounterStore()
    store.increment()
    expect(store.count).toBe(1)
  })
  
  it('getterãŒæ­£ã—ãå‹•ä½œã™ã‚‹', () => {
    const store = useCounterStore()
    store.count = 5
    expect(store.doubleCount).toBe(10)
  })
})
```

### 3. ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒ†ã‚¹ãƒˆ

```javascript
// tests/components/Counter.test.js
import { describe, it, expect } from 'vitest'
import { mount } from '@vue/test-utils'
import Counter from '@/components/Counter.vue'

describe('Counter Component', () => {
  it('ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ãŒæ­£ã—ãè¡¨ç¤ºã•ã‚Œã‚‹', () => {
    const wrapper = mount(Counter)
    expect(wrapper.text()).toContain('ã‚«ã‚¦ãƒ³ãƒˆ: 0')
  })
  
  it('ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯ã§ã‚«ã‚¦ãƒ³ãƒˆãŒå¢—åŠ ã™ã‚‹', async () => {
    const wrapper = mount(Counter)
    const button = wrapper.find('button')
    
    await button.trigger('click')
    expect(wrapper.text()).toContain('ã‚«ã‚¦ãƒ³ãƒˆ: 1')
  })
})
```

## ã¾ã¨ã‚

Vue3ã®çŠ¶æ…‹ç®¡ç†ã¯ã€Composition APIã¨Piniaã®çµ„ã¿åˆã‚ã›ã«ã‚ˆã‚Šã€ã‚ˆã‚ŠæŸ”è»Ÿã§ä¿å®ˆæ€§ã®é«˜ã„ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®æ§‹ç¯‰ãŒå¯èƒ½ã«ãªã‚Šã¾ã—ãŸã€‚

### é¸æŠã®æŒ‡é‡

- **å°è¦æ¨¡ã‚¢ãƒ—ãƒª**: Composition API + Provide/Inject
- **ä¸­è¦æ¨¡ã‚¢ãƒ—ãƒª**: Piniaï¼ˆå˜ä¸€ã‚¹ãƒˆã‚¢ï¼‰
- **å¤§è¦æ¨¡ã‚¢ãƒ—ãƒª**: Piniaï¼ˆè¤‡æ•°ã‚¹ãƒˆã‚¢ã®åˆ†å‰²ï¼‰

### ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

1. **é©åˆ‡ãªç²’åº¦ã§ã®ã‚¹ãƒˆã‚¢åˆ†å‰²**
2. **å‹å®‰å…¨æ€§ã®ç¢ºä¿**
3. **éåŒæœŸå‡¦ç†ã®é©åˆ‡ãªç®¡ç†**
4. **çŠ¶æ…‹ã®æ°¸ç¶šåŒ–ã®æ¤œè¨**
5. **ãƒ†ã‚¹ãƒˆã®æ›¸ãã‚„ã™ã•ã‚’è€ƒæ…®**
6. **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®æœ€é©åŒ–**
7. **ãƒ¡ãƒ¢ãƒªãƒªãƒ¼ã‚¯ã®é˜²æ­¢**

### å­¦ç¿’ãƒªã‚½ãƒ¼ã‚¹

- [Vue3å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://vuejs.org/)
- [Piniaå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://pinia.vuejs.org/)
- [Vue Test Utils](https://test-utils.vuejs.org/)
- [Vitest](https://vitest.dev/)

Vue3ã®çŠ¶æ…‹ç®¡ç†ã‚’é©åˆ‡ã«æ´»ç”¨ã™ã‚‹ã“ã¨ã§ã€ã‚¹ã‚±ãƒ¼ãƒ©ãƒ–ãƒ«ã§ä¿å®ˆæ€§ã®é«˜ã„ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æ§‹ç¯‰ã§ãã¾ã™ã€‚ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®è¦ä»¶ã«å¿œã˜ã¦ã€æœ€é©ãªæ‰‹æ³•ã‚’é¸æŠã—ã€æ®µéšçš„ã«å°å…¥ã—ã¦ã„ãã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚
