---
title: "Vue3ã®v-modelã‚’èª¿ã¹ã¦ã¿ãŸ"
emoji: "ğŸ”—"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["vue", "vue3", "javascript", "typescript", "frontend"]
published: false
---

# ã¯ã˜ã‚ã«

Vue3ã®`v-model`ã¯ã€ãƒ•ã‚©ãƒ¼ãƒ è¦ç´ ã¨ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆé–“ã§åŒæ–¹å‘ãƒ‡ãƒ¼ã‚¿ãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ã‚’å®Ÿç¾ã™ã‚‹ãŸã‚ã®å¼·åŠ›ãªãƒ‡ã‚£ãƒ¬ã‚¯ãƒ†ã‚£ãƒ–ã§ã™ã€‚ã“ã®è¨˜äº‹ã§ã¯ã€`v-model`ã®åŸºæœ¬æ¦‚å¿µã‹ã‚‰ã€ã‚«ã‚¹ã‚¿ãƒ ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ã®å®Ÿè£…æ–¹æ³•ã€ãã—ã¦å®Ÿç”¨çš„ãªãƒ‘ã‚¿ãƒ¼ãƒ³ã¾ã§è©³ã—ãè§£èª¬ã—ã¾ã™ã€‚

## ã“ã®è¨˜äº‹ã§å­¦ã¹ã‚‹ã“ã¨

- `v-model`ã®åŸºæœ¬æ¦‚å¿µã¨ä»•çµ„ã¿
- ãƒ•ã‚©ãƒ¼ãƒ è¦ç´ ã§ã®`v-model`ã®ä½¿ã„æ–¹
- ã‚«ã‚¹ã‚¿ãƒ ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ã®`v-model`å®Ÿè£…
- è¤‡æ•°ã®`v-model`ã®æ´»ç”¨æ–¹æ³•
- å®Ÿç”¨çš„ãªãƒ‘ã‚¿ãƒ¼ãƒ³ã¨ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

## v-modelã¨ã¯ï¼Ÿ

`v-model`ã¯ã€Vue.jsãŒæä¾›ã™ã‚‹åŒæ–¹å‘ãƒ‡ãƒ¼ã‚¿ãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ã®ãŸã‚ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒ†ã‚£ãƒ–ã§ã™ã€‚ãƒ•ã‚©ãƒ¼ãƒ è¦ç´ ã®å€¤ã¨ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒ‡ãƒ¼ã‚¿ã‚’è‡ªå‹•çš„ã«åŒæœŸã•ã›ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

### åŸºæœ¬çš„ãªä»•çµ„ã¿

`v-model`ã¯ä»¥ä¸‹ã®ç³–è¡£æ§‹æ–‡ï¼ˆã‚·ãƒ³ã‚¿ãƒƒã‚¯ã‚¹ã‚·ãƒ¥ã‚¬ãƒ¼ï¼‰ã§ã™ï¼š

```vue
<!-- v-modelã®ç³–è¡£æ§‹æ–‡ -->
<input v-model="message" />

<!-- å®Ÿéš›ã®å±•é–‹å½¢ -->
<input 
  :value="message" 
  @input="message = $event.target.value" 
/>
```

ã¤ã¾ã‚Šã€`v-model`ã¯ï¼š
1. `:value`ã§ãƒ‡ãƒ¼ã‚¿ã‚’è¦ç´ ã«æ¸¡ã™ï¼ˆãƒ‡ãƒ¼ã‚¿ â†’ è¦ç´ ï¼‰
2. `@input`ã§è¦ç´ ã®å¤‰æ›´ã‚’ãƒ‡ãƒ¼ã‚¿ã«åæ˜ ã™ã‚‹ï¼ˆè¦ç´  â†’ ãƒ‡ãƒ¼ã‚¿ï¼‰

## ãƒ•ã‚©ãƒ¼ãƒ è¦ç´ ã§ã®v-model

### åŸºæœ¬çš„ãªä½¿ã„æ–¹

```vue
<script setup>
import { ref } from 'vue'

const message = ref('')
const email = ref('')
const age = ref(0)
const isChecked = ref(false)
const selectedOption = ref('')
</script>

<template>
  <div>
    <!-- ãƒ†ã‚­ã‚¹ãƒˆå…¥åŠ› -->
    <input v-model="message" type="text" placeholder="ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å…¥åŠ›" />
    <p>å…¥åŠ›å†…å®¹: {{ message }}</p>
    
    <!-- ãƒ¡ãƒ¼ãƒ«å…¥åŠ› -->
    <input v-model="email" type="email" placeholder="ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹" />
    
    <!-- æ•°å€¤å…¥åŠ› -->
    <input v-model.number="age" type="number" placeholder="å¹´é½¢" />
    
    <!-- ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ -->
    <input v-model="isChecked" type="checkbox" id="checkbox" />
    <label for="checkbox">åŒæ„ã™ã‚‹</label>
    
    <!-- ã‚»ãƒ¬ã‚¯ãƒˆãƒœãƒƒã‚¯ã‚¹ -->
    <select v-model="selectedOption">
      <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
      <option value="option1">ã‚ªãƒ—ã‚·ãƒ§ãƒ³1</option>
      <option value="option2">ã‚ªãƒ—ã‚·ãƒ§ãƒ³2</option>
    </select>
  </div>
</template>
```

### ä¿®é£¾å­ã®æ´»ç”¨

`v-model`ã«ã¯ä¾¿åˆ©ãªä¿®é£¾å­ãŒç”¨æ„ã•ã‚Œã¦ã„ã¾ã™ï¼š

```vue
<script setup>
import { ref } from 'vue'

const message = ref('')
const lazyMessage = ref('')
const numberValue = ref(0)
const trimmedText = ref('')
</script>

<template>
  <div>
    <!-- .lazy: changeã‚¤ãƒ™ãƒ³ãƒˆã§æ›´æ–°ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯inputã‚¤ãƒ™ãƒ³ãƒˆï¼‰ -->
    <input v-model.lazy="lazyMessage" placeholder="ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã‚¢ã‚¦ãƒˆæ™‚ã«æ›´æ–°" />
    
    <!-- .number: æ–‡å­—åˆ—ã‚’æ•°å€¤ã«å¤‰æ› -->
    <input v-model.number="numberValue" type="number" />
    
    <!-- .trim: å‰å¾Œã®ç©ºç™½ã‚’å‰Šé™¤ -->
    <input v-model.trim="trimmedText" placeholder="ç©ºç™½ã¯è‡ªå‹•å‰Šé™¤" />
    
    <!-- è¤‡æ•°ã®ä¿®é£¾å­ã‚’çµ„ã¿åˆã‚ã› -->
    <input v-model.lazy.trim="message" placeholder="é…å»¶æ›´æ–°ï¼‹ç©ºç™½å‰Šé™¤" />
  </div>
</template>
```

## ã‚«ã‚¹ã‚¿ãƒ ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ã®v-model

ã‚«ã‚¹ã‚¿ãƒ ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§`v-model`ã‚’ä½¿ç”¨ã™ã‚‹ã«ã¯ã€`defineModel`ãƒã‚¯ãƒ­ã¾ãŸã¯`props`ã¨`emit`ã‚’çµ„ã¿åˆã‚ã›ã¦å®Ÿè£…ã—ã¾ã™ã€‚

### defineModelãƒã‚¯ãƒ­ã‚’ä½¿ç”¨ï¼ˆVue 3.4+ï¼‰

```vue:components/CustomInput.vue
<script setup>
// defineModelãƒã‚¯ãƒ­ã§v-modelã‚’å®šç¾©
const modelValue = defineModel()

// ã‚«ã‚¹ã‚¿ãƒ ãƒ­ã‚¸ãƒƒã‚¯ã‚’è¿½åŠ 
const handleInput = (event) => {
  // å…¥åŠ›å€¤ã‚’å¤§æ–‡å­—ã«å¤‰æ›
  const upperValue = event.target.value.toUpperCase()
  modelValue.value = upperValue
}
</script>

<template>
  <div class="custom-input">
    <label>ã‚«ã‚¹ã‚¿ãƒ å…¥åŠ›:</label>
    <input 
      :value="modelValue" 
      @input="handleInput"
      class="input-field"
    />
    <p class="preview">ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼: {{ modelValue }}</p>
  </div>
</template>

<style scoped>
.custom-input {
  border: 2px solid #e0e0e0;
  border-radius: 8px;
  padding: 16px;
  margin: 8px 0;
}

.input-field {
  width: 100%;
  padding: 8px;
  border: 1px solid #ccc;
  border-radius: 4px;
  font-size: 16px;
}

.preview {
  margin-top: 8px;
  color: #666;
  font-style: italic;
}
</style>
```

### propsã¨emitã‚’ä½¿ç”¨ï¼ˆå¾“æ¥ã®æ–¹æ³•ï¼‰

```vue:components/CustomInput.vue
<script setup>
// propsã®å®šç¾©
const props = defineProps<{
  modelValue: string
}>()

// emitã®å®šç¾©
const emit = defineEmits<{
  'update:modelValue': [value: string]
}>()

// å…¥åŠ›å‡¦ç†
const handleInput = (event: Event) => {
  const target = event.target as HTMLInputElement
  const value = target.value.toUpperCase()
  emit('update:modelValue', value)
}
</script>

<template>
  <div class="custom-input">
    <label>ã‚«ã‚¹ã‚¿ãƒ å…¥åŠ›:</label>
    <input 
      :value="props.modelValue" 
      @input="handleInput"
      class="input-field"
    />
    <p class="preview">ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼: {{ props.modelValue }}</p>
  </div>
</template>
```

### è¦ªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ã®ä½¿ç”¨

```vue:components/ParentComponent.vue
<script setup>
import { ref } from 'vue'
import CustomInput from './CustomInput.vue'

const inputValue = ref('')
</script>

<template>
  <div>
    <h2>ã‚«ã‚¹ã‚¿ãƒ ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®v-model</h2>
    
    <!-- ã‚«ã‚¹ã‚¿ãƒ ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«v-modelã‚’é©ç”¨ -->
    <CustomInput v-model="inputValue" />
    
    <p>è¦ªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®å€¤: {{ inputValue }}</p>
  </div>
</template>
```

## è¤‡æ•°ã®v-model

Vue 3.3ä»¥é™ã§ã¯ã€1ã¤ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§è¤‡æ•°ã®`v-model`ã‚’ä½¿ç”¨ã§ãã¾ã™ã€‚

### è¤‡æ•°v-modelã®å®Ÿè£…

```vue:components/UserForm.vue
<script setup>
// è¤‡æ•°ã®v-modelã‚’å®šç¾©
const name = defineModel('name', { default: '' })
const email = defineModel('email', { default: '' })
const age = defineModel('age', { default: 0 })

// ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³é–¢æ•°
const validateForm = () => {
  const errors = []
  
  if (!name.value.trim()) {
    errors.push('åå‰ã¯å¿…é ˆã§ã™')
  }
  
  if (!email.value.includes('@')) {
    errors.push('æœ‰åŠ¹ãªãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„')
  }
  
  if (age.value < 0) {
    errors.push('å¹´é½¢ã¯0ä»¥ä¸Šã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™')
  }
  
  return errors
}

// ãƒ•ã‚©ãƒ¼ãƒ é€ä¿¡å‡¦ç†
const handleSubmit = () => {
  const errors = validateForm()
  if (errors.length === 0) {
    console.log('ãƒ•ã‚©ãƒ¼ãƒ é€ä¿¡:', {
      name: name.value,
      email: email.value,
      age: age.value
    })
  } else {
    console.error('ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼:', errors)
  }
}
</script>

<template>
  <form @submit.prevent="handleSubmit" class="user-form">
    <div class="form-group">
      <label for="name">åå‰:</label>
      <input 
        id="name"
        v-model="name" 
        type="text" 
        placeholder="ãŠåå‰ã‚’å…¥åŠ›"
        class="form-input"
      />
    </div>
    
    <div class="form-group">
      <label for="email">ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹:</label>
      <input 
        id="email"
        v-model="email" 
        type="email" 
        placeholder="ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å…¥åŠ›"
        class="form-input"
      />
    </div>
    
    <div class="form-group">
      <label for="age">å¹´é½¢:</label>
      <input 
        id="age"
        v-model.number="age" 
        type="number" 
        min="0"
        class="form-input"
      />
    </div>
    
    <button type="submit" class="submit-button">
      é€ä¿¡
    </button>
  </form>
</template>

<style scoped>
.user-form {
  max-width: 400px;
  margin: 0 auto;
  padding: 20px;
  border: 1px solid #ddd;
  border-radius: 8px;
}

.form-group {
  margin-bottom: 16px;
}

.form-group label {
  display: block;
  margin-bottom: 4px;
  font-weight: bold;
}

.form-input {
  width: 100%;
  padding: 8px;
  border: 1px solid #ccc;
  border-radius: 4px;
  font-size: 16px;
}

.submit-button {
  width: 100%;
  padding: 12px;
  background-color: #007bff;
  color: white;
  border: none;
  border-radius: 4px;
  font-size: 16px;
  cursor: pointer;
}

.submit-button:hover {
  background-color: #0056b3;
}
</style>
```

### è¦ªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ã®è¤‡æ•°v-modelä½¿ç”¨

```vue:components/ParentComponent.vue
<script setup>
import { ref } from 'vue'
import UserForm from './UserForm.vue'

const userName = ref('')
const userEmail = ref('')
const userAge = ref(0)
</script>

<template>
  <div>
    <h2>è¤‡æ•°v-modelã®ä¾‹</h2>
    
    <!-- è¤‡æ•°ã®v-modelã‚’æŒ‡å®š -->
    <UserForm 
      v-model:name="userName"
      v-model:email="userEmail"
      v-model:age="userAge"
    />
    
    <div class="preview">
      <h3>å…¥åŠ›å†…å®¹ã®ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼:</h3>
      <p>åå‰: {{ userName }}</p>
      <p>ãƒ¡ãƒ¼ãƒ«: {{ userEmail }}</p>
      <p>å¹´é½¢: {{ userAge }}</p>
    </div>
  </div>
</template>

<style scoped>
.preview {
  margin-top: 20px;
  padding: 16px;
  background-color: #f8f9fa;
  border-radius: 8px;
}
</style>
```

## å®Ÿç”¨çš„ãªãƒ‘ã‚¿ãƒ¼ãƒ³

### 1. æ¤œç´¢ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

```vue:components/SearchBox.vue
<script setup>
import { ref, watch } from 'vue'

const searchQuery = defineModel('query', { default: '' })
const isSearching = ref(false)

// æ¤œç´¢ã‚¯ã‚¨ãƒªã®å¤‰æ›´ã‚’ç›£è¦–
watch(searchQuery, (newQuery) => {
  if (newQuery.length > 2) {
    isSearching.value = true
    // å®Ÿéš›ã®æ¤œç´¢å‡¦ç†ã‚’ã“ã“ã«å®Ÿè£…
    setTimeout(() => {
      isSearching.value = false
    }, 500)
  }
})

const clearSearch = () => {
  searchQuery.value = ''
}
</script>

<template>
  <div class="search-box">
    <div class="search-input-container">
      <input 
        v-model="searchQuery"
        type="text"
        placeholder="æ¤œç´¢..."
        class="search-input"
      />
      <button 
        v-if="searchQuery"
        @click="clearSearch"
        class="clear-button"
      >
        Ã—
      </button>
    </div>
    
    <div v-if="isSearching" class="searching-indicator">
      æ¤œç´¢ä¸­...
    </div>
  </div>
</template>

<style scoped>
.search-box {
  position: relative;
}

.search-input-container {
  position: relative;
  display: flex;
  align-items: center;
}

.search-input {
  width: 100%;
  padding: 12px 40px 12px 12px;
  border: 2px solid #e0e0e0;
  border-radius: 25px;
  font-size: 16px;
  outline: none;
  transition: border-color 0.3s;
}

.search-input:focus {
  border-color: #007bff;
}

.clear-button {
  position: absolute;
  right: 12px;
  background: none;
  border: none;
  font-size: 20px;
  cursor: pointer;
  color: #999;
}

.clear-button:hover {
  color: #333;
}

.searching-indicator {
  position: absolute;
  top: 100%;
  left: 0;
  right: 0;
  padding: 8px;
  background-color: #f8f9fa;
  border: 1px solid #e0e0e0;
  border-top: none;
  border-radius: 0 0 8px 8px;
  text-align: center;
  color: #666;
}
</style>
```

### 2. ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

```vue:components/CustomSlider.vue
<script setup>
import { ref, watch } from 'vue'

const props = defineProps<{
  modelValue: number
  min?: number
  max?: number
  step?: number
  label?: string
}>()

const emit = defineEmits<{
  'update:modelValue': [value: number]
}>()

const sliderValue = ref(props.modelValue)

// ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ã®å€¤ãŒå¤‰æ›´ã•ã‚ŒãŸã¨ãã®å‡¦ç†
const handleInput = (event: Event) => {
  const target = event.target as HTMLInputElement
  const value = Number(target.value)
  sliderValue.value = value
  emit('update:modelValue', value)
}

// å¤–éƒ¨ã‹ã‚‰ã®å€¤ã®å¤‰æ›´ã‚’ç›£è¦–
watch(() => props.modelValue, (newValue) => {
  sliderValue.value = newValue
})
</script>

<template>
  <div class="slider-container">
    <label v-if="label" class="slider-label">
      {{ label }}: {{ sliderValue }}
    </label>
    
    <div class="slider-wrapper">
      <input 
        type="range"
        :min="min || 0"
        :max="max || 100"
        :step="step || 1"
        :value="sliderValue"
        @input="handleInput"
        class="slider"
      />
      
      <div class="slider-values">
        <span>{{ min || 0 }}</span>
        <span>{{ max || 100 }}</span>
      </div>
    </div>
  </div>
</template>

<style scoped>
.slider-container {
  margin: 16px 0;
}

.slider-label {
  display: block;
  margin-bottom: 8px;
  font-weight: bold;
  color: #333;
}

.slider-wrapper {
  position: relative;
}

.slider {
  width: 100%;
  height: 6px;
  border-radius: 3px;
  background: #ddd;
  outline: none;
  -webkit-appearance: none;
}

.slider::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 20px;
  height: 20px;
  border-radius: 50%;
  background: #007bff;
  cursor: pointer;
}

.slider::-moz-range-thumb {
  width: 20px;
  height: 20px;
  border-radius: 50%;
  background: #007bff;
  cursor: pointer;
  border: none;
}

.slider-values {
  display: flex;
  justify-content: space-between;
  margin-top: 4px;
  font-size: 12px;
  color: #666;
}
</style>
```

### 3. ãƒˆã‚°ãƒ«ã‚¹ã‚¤ãƒƒãƒã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

```vue:components/ToggleSwitch.vue
<script setup>
import { ref, watch } from 'vue'

const props = defineProps<{
  modelValue: boolean
  label?: string
  disabled?: boolean
}>()

const emit = defineEmits<{
  'update:modelValue': [value: boolean]
}>()

const isOn = ref(props.modelValue)

const toggle = () => {
  if (props.disabled) return
  
  isOn.value = !isOn.value
  emit('update:modelValue', isOn.value)
}

// å¤–éƒ¨ã‹ã‚‰ã®å€¤ã®å¤‰æ›´ã‚’ç›£è¦–
watch(() => props.modelValue, (newValue) => {
  isOn.value = newValue
})
</script>

<template>
  <div class="toggle-container">
    <label v-if="label" class="toggle-label">
      {{ label }}
    </label>
    
    <div 
      class="toggle-switch"
      :class="{ 
        'toggle-on': isOn, 
        'toggle-disabled': disabled 
      }"
      @click="toggle"
    >
      <div class="toggle-thumb"></div>
    </div>
  </div>
</template>

<style scoped>
.toggle-container {
  display: flex;
  align-items: center;
  gap: 12px;
}

.toggle-label {
  font-weight: 500;
  color: #333;
}

.toggle-switch {
  position: relative;
  width: 50px;
  height: 24px;
  background-color: #ccc;
  border-radius: 12px;
  cursor: pointer;
  transition: background-color 0.3s;
}

.toggle-switch.toggle-on {
  background-color: #007bff;
}

.toggle-switch.toggle-disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.toggle-thumb {
  position: absolute;
  top: 2px;
  left: 2px;
  width: 20px;
  height: 20px;
  background-color: white;
  border-radius: 50%;
  transition: transform 0.3s;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
}

.toggle-on .toggle-thumb {
  transform: translateX(26px);
}
</style>
```

## ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

### 1. å‹å®‰å…¨æ€§ã®ç¢ºä¿

```typescript
// è‰¯ã„ä¾‹ï¼šå³å¯†ãªå‹å®šç¾©
interface UserData {
  name: string
  email: string
  age: number
}

const userData = defineModel<UserData>('userData', {
  default: () => ({
    name: '',
    email: '',
    age: 0
  })
})

// æ‚ªã„ä¾‹ï¼šanyå‹ã®ä½¿ç”¨
const userData = defineModel<any>('userData')
```

### 2. ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã®å®Ÿè£…

```vue
<script setup>
import { computed } from 'vue'

const email = defineModel('email', { default: '' })

// ãƒªã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãªãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
const emailError = computed(() => {
  if (!email.value) return 'ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã¯å¿…é ˆã§ã™'
  if (!email.value.includes('@')) return 'æœ‰åŠ¹ãªãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„'
  return ''
})

const isValid = computed(() => emailError.value === '')
</script>

<template>
  <div>
    <input 
      v-model="email"
      type="email"
      :class="{ 'error': emailError }"
    />
    <p v-if="emailError" class="error-message">
      {{ emailError }}
    </p>
  </div>
</template>
```

### 3. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®æœ€é©åŒ–

```vue
<script setup>
import { ref, watch, nextTick } from 'vue'

const searchQuery = defineModel('query', { default: '' })
const searchResults = ref([])
const isSearching = ref(false)

// ãƒ‡ãƒã‚¦ãƒ³ã‚¹å‡¦ç†
let searchTimeout: NodeJS.Timeout

watch(searchQuery, async (newQuery) => {
  if (searchTimeout) {
    clearTimeout(searchTimeout)
  }
  
  if (newQuery.length < 2) {
    searchResults.value = []
    return
  }
  
  searchTimeout = setTimeout(async () => {
    isSearching.value = true
    
    try {
      // å®Ÿéš›ã®æ¤œç´¢å‡¦ç†
      const results = await performSearch(newQuery)
      searchResults.value = results
    } catch (error) {
      console.error('æ¤œç´¢ã‚¨ãƒ©ãƒ¼:', error)
    } finally {
      isSearching.value = false
    }
  }, 300) // 300mså¾Œã«å®Ÿè¡Œ
})
</script>
```

## ã‚ˆãã‚ã‚‹å•é¡Œã¨è§£æ±ºæ–¹æ³•

### 1. v-modelãŒæ›´æ–°ã•ã‚Œãªã„

```vue
<!-- å•é¡Œï¼šã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’ç›´æ¥å¤‰æ›´ -->
<script setup>
const user = ref({ name: '', email: '' })
</script>

<template>
  <!-- ã“ã‚Œã¯å‹•ä½œã—ãªã„ -->
  <input v-model="user.name" />
</template>

<!-- è§£æ±ºæ–¹æ³•ï¼šã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆå…¨ä½“ã‚’æ›´æ–° -->
<script setup>
const user = ref({ name: '', email: '' })

const updateName = (newName: string) => {
  user.value = { ...user.value, name: newName }
}
</script>

<template>
  <input :value="user.name" @input="updateName($event.target.value)" />
</template>
```

### 2. ã‚«ã‚¹ã‚¿ãƒ ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§v-modelãŒå‹•ä½œã—ãªã„

```vue
<!-- å•é¡Œï¼šemitã®åå‰ãŒé–“é•ã£ã¦ã„ã‚‹ -->
<script setup>
const emit = defineEmits<{
  'input': [value: string] // é–“é•ã„
}>()
</script>

<!-- è§£æ±ºæ–¹æ³•ï¼šæ­£ã—ã„emitåã‚’ä½¿ç”¨ -->
<script setup>
const emit = defineEmits<{
  'update:modelValue': [value: string] // æ­£ã—ã„
}>()
</script>
```

### 3. æ•°å€¤ã®å‹å¤‰æ›

```vue
<!-- å•é¡Œï¼šæ–‡å­—åˆ—ã¨ã—ã¦æ‰±ã‚ã‚Œã‚‹ -->
<input v-model="age" type="number" />

<!-- è§£æ±ºæ–¹æ³•ï¼š.numberä¿®é£¾å­ã‚’ä½¿ç”¨ -->
<input v-model.number="age" type="number" />
```

## ã¾ã¨ã‚

Vue3ã®`v-model`ã¯ã€åŒæ–¹å‘ãƒ‡ãƒ¼ã‚¿ãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ã‚’å®Ÿç¾ã™ã‚‹ãŸã‚ã®å¼·åŠ›ãªæ©Ÿèƒ½ã§ã™ã€‚é©åˆ‡ã«ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ã€ãƒ•ã‚©ãƒ¼ãƒ å‡¦ç†ã‚„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆé–“ã®é€šä¿¡ã‚’åŠ¹ç‡çš„ã«å®Ÿè£…ã§ãã¾ã™ã€‚

### é‡è¦ãªãƒã‚¤ãƒ³ãƒˆ

1. **åŸºæœ¬æ¦‚å¿µ**: `v-model`ã¯`:value`ã¨`@input`ã®ç³–è¡£æ§‹æ–‡
2. **ã‚«ã‚¹ã‚¿ãƒ ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ**: `defineModel`ãƒã‚¯ãƒ­ã¾ãŸã¯`props`ã¨`emit`ã§å®Ÿè£…
3. **è¤‡æ•°v-model**: Vue 3.3ä»¥é™ã§è¤‡æ•°ã®`v-model`ã‚’åŒæ™‚ã«ä½¿ç”¨å¯èƒ½
4. **å‹å®‰å…¨æ€§**: TypeScriptã‚’ä½¿ç”¨ã—ã¦å³å¯†ãªå‹å®šç¾©ã‚’è¡Œã†
5. **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹**: ãƒ‡ãƒã‚¦ãƒ³ã‚¹ã‚„é©åˆ‡ãªã‚¤ãƒ™ãƒ³ãƒˆå‡¦ç†ã§æœ€é©åŒ–

### ä»Šå¾Œã®å­¦ç¿’

- Vue3ã®Composition APIã®è©³ç´°
- çŠ¶æ…‹ç®¡ç†ãƒ©ã‚¤ãƒ–ãƒ©ãƒªï¼ˆPiniaï¼‰ã¨ã®é€£æº
- ãƒ•ã‚©ãƒ¼ãƒ ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®æ´»ç”¨
- ã‚«ã‚¹ã‚¿ãƒ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒ†ã‚£ãƒ–ã®ä½œæˆ

ã“ã®è¨˜äº‹ã§å­¦ã‚“ã å†…å®¹ã‚’æ´»ç”¨ã—ã¦ã€ã‚ˆã‚ŠåŠ¹ç‡çš„ã§ä¿å®ˆæ€§ã®é«˜ã„Vue3ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æ§‹ç¯‰ã—ã¦ãã ã•ã„ï¼
